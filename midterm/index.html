<!-- Guilherme dos Santos 07/07/2024-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <!-- <script src="./midterm.js" defer></script> -->
    <title>Midterm</title>
  </head>
  <body class="dark">
    <div id="mainWrapper">
      <header>
        <h1>Midterm/ Project-6 -- WEB 114</h1>
        <button id="dark">Light mode</button>
        <h2>Guilherme dos Santos</h2>
      </header>
      <div class="flexRow" id="firstSection">
        <!-- <section>
          <h2>Differences</h2>
          <form action="post" id="equalForm">
            <fieldset>
              <div class="flexColumn">
                <label for="compare">Select operator:</label>
                <select data-equal name="equal">
                  <option selected value="" disabled>Operator</option>
                  <option data-option="assign" value="assign">=</option>
                  <option data-option="equal" value="equal">==</option>
                  <option data-option="strict" value="strict">===</option>
                </select>
              </div>
              <div class="flexColumn">
                <div class="flexColumn">
                  <label for="type1">Select type 1:</label>
                  <select data-type1 name="type1">
                    <option selected value="" disabled>Type</option>
                    <option data-option="string" value="string">String</option>
                    <option data-option="number" value="number">Number</option>
                    <option data-option="boolean" value="boolean">
                      Boolean
                    </option>
                  </select>
                </div>
                <label for="input1" id="label1">Enter your first data:</label>
                <input data-input1 type="text" id="input1" required />
                <div class="flexColumn">
                  <div data-radiogroup class="flexColumn">
                    <label for="true1">True</label>
                    <input
                      type="radio"
                      id="true1"
                      name="boolean1"
                      value="true"
                      required
                    />
                    <label for="false1">False</label>
                    <input
                      type="radio"
                      id="false1"
                      name="boolean1"
                      value="false"
                      required
                    />
                  </div>
                </div>
              </div>
              <div class="flexColumn">
                <div class="flexColumn">
                  <label for="type2">Select type 2:</label>
                  <select data-type2 name="type2">
                    <option selected value="" disabled>Type</option>
                    <option data-option="string" value="string">String</option>
                    <option data-option="number" value="number">Number</option>
                    <option data-option="boolean" value="boolean">
                      Boolean
                    </option>
                  </select>
                </div>
                <label for="input2" id="label2">Enter your second data:</label>
                <input data-input2 type="text" id="input2" required />
                <div class="flexColumn">
                  <div data-radiogroup class="flexColumn">
                    <label for="true2">True</label>
                    <input
                      type="radio"
                      id="true2"
                      name="boolean2"
                      value="true"
                      required
                    />
                    <label for="false2">False</label>
                    <input
                      type="radio"
                      id="false2"
                      name="boolean2"
                      value="false"
                      required
                    />
                  </div>
                </div>
              </div>
              <button type="submit" data-equal>Submit</button>
            </fieldset>
          </form>
        </section> -->
        <section>
          <h2>Find out if you know the right order of the operation</h2>
          <form id="valueForm">
            <fieldset>
              <div class="flexColumn">
                <p id="expression">5 + 3 * x - (y/2)</p>
                <label for="x">Enter a value for x:</label>
                <input type="number" step="0.1" id="xValue" required />

                <label for="y">Enter a value for y:</label>
                <input type="number" step="0.1" id="yValue" required />

                <label for="result">What is the result?</label>
                <input type="number" step="0.1" id="result" required />
              </div>
              <button type="submit" id="submitButton">
                Find out the result
              </button>
              <button type="button" class="hidden" id="reloadGame">
                Restart
              </button>
            </fieldset>
          </form>
          <p id="feedback"></p>
        </section>

        <script>
          //Array with the expressions to display
          const expressionStrings = [
            "5 + 3 ** x - y / 2",
            "(x + y) * 2 - 4 / 2",
            "10 / (2 + x) ** y",
            "x * y + 3 - 5 / 2",
            "(3 + x) * (y ** 2 - 2)",
          ];
          // Array of arrow functions expressions to evaluate
          const expressions = [
            (x, y) => 5 + 3 ** x - y / 2,
            (x, y) => (x + y) * 2 - 4 / 2,
            (x, y) => 10 / (2 + x) ** y,
            (x, y) => x * y + 3 - 5 / 2,
            (x, y) => (3 + x) * (y ** 2 - 2),
          ];
          //Function called with the values of x, y, and i [index] to evaluate the expression
          const evaluateExpression = (x, y, i) => {
            return expressions[i](x, y);
          };

          let currentExpressionIndex = 0;
          const expressionElement = document.getElementById("expression");
          const feedbackElement = document.getElementById("feedback");
          const expressionForm = document.getElementById("valueForm");

          function loadNextExpression() {
            if (currentExpressionIndex < expressionStrings.length) {
              expressionElement.textContent =
                expressionStrings[currentExpressionIndex];
              expressionForm.reset();
              xValue.focus();
            } else {
              expressionElement.textContent =
                "You've completed all expressions!";
              xValue.setAttribute("disabled", true);
              yValue.setAttribute("disabled", true);
              result.setAttribute("disabled", true);
              submitButton.classList.add("hidden");
              reloadGame.classList.remove("hidden");
            }
          }

          expressionForm.addEventListener("submit", function (event) {
            event.preventDefault();
            //Get the values from the form after submit is clicked
            const xInput = parseFloat(xValue.value);
            const yInput = parseFloat(yValue.value);
            const guessedResult = parseFloat(result.value);

            const correctResult = evaluateExpression(
              xInput,
              yInput,
              currentExpressionIndex
            );

            if (guessedResult === correctResult) {
              feedbackElement.textContent = "Correct! Well done!";
            } else {
              const formattedResult = correctResult.toFixed(3);
              feedbackElement.innerHTML = `Incorrect. The correct result was <b>${formattedResult}</b>.<br>
              <br>
              Remember The order of operations:<br> 
               Parentheses, Exponents, Multiplication and Division, Addition and Subtraction.<br>
              P<br>
              E<br>
              M<br>
              D<br>
              A<br>
              S<br>
            `;
            }
            currentExpressionIndex++;
            loadNextExpression();
            reloadGame.addEventListener("click", function () {
              currentExpressionIndex = 0;
              reloadGame.classList.add("hidden");
              loadNextExpression();
              xValue.removeAttribute("disabled");
              yValue.removeAttribute("disabled");
              result.removeAttribute("disabled");
              submitButton.classList.remove("hidden");
              feedbackElement.textContent = "";
            });
          });
          //Starts the first expression
          loadNextExpression();
        </script>
        <!-- <section>
          <h2>Simple Calculator</h2>
          <form action="post" id="calculator">
            <fieldset>
              <div class="flexColumn">
                <label for="calculator1">Enter the first number:</label>
                <input
                  data-calculator1
                  type="number"
                  required
                  id="calculator1"
                />
              </div>
              <div class="flexColumn">
                <label for="calculator2">Enter the second number:</label>
                <input
                  data-calculator2
                  type="number"
                  required
                  id="calculator2"
                />
              </div>
              <div class="flexColumn">
                <label for="calculatorSelect">Choose the operator</label>
                <select
                  data-selectionCalc
                  name="calculatorSelect"
                  id="calculatorSelect"
                  required
                >
                  <option selected value="" disabled>Operator</option>
                  <option value="add">Sum +</option>
                  <option value="subtract">Sub -</option>
                  <option value="multiply">Mult *</option>
                  <option value="divide">Div /</option>
                  <option value="remainder">Rema %</option>
                  <option value="exponent">Power **</option>
                </select>
              </div>
              <div class="flexRow">
                <button type="submit" data-calc>Calculate</button>
                <div class="flexColumn">
                  <span>Result:</span>
                  <span id="finalResult"></span>
                </div>
              </div>
            </fieldset>
          </form>
        </section> -->
      </div>
      <footer>
        <p>Guilherme dos Santos WEB 114 2024</p>
      </footer>
    </div>
  </body>
</html>
